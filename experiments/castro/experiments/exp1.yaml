# Experiment 1: 2-Period Deterministic
# Validates Nash equilibrium with deferred crediting.
#
# Setup:
# - 2 ticks per day, 1 day
# - Deterministic payment arrivals
#
# Uses deterministic mode (single evaluation) since the scenario has
# no stochastic elements - all transactions are fixed at specific ticks.

name: exp1
description: "2-Period Deterministic Nash Equilibrium"

# Scenario configuration (relative to this file's directory)
scenario: ../configs/exp1_2period.yaml

# Evaluation settings
evaluation:
  mode: deterministic  # No bootstrap sampling - scenario is deterministic
  ticks: 2  # Only 2 ticks in scenario

# Convergence criteria
convergence:
  max_iterations: 25
  stability_threshold: 0.05
  stability_window: 5

# LLM configuration
llm:
  model: "openai:gpt-5.2"
  temperature: 0.5
  max_retries: 3
  timeout_seconds: 900
  reasoning_effort: "high"

# Policy constraints (Castro-specific - MINIMAL SET)
# The Initial Liquidity Game has ONE decision: what fraction to post at t=0
policy_constraints:
  allowed_parameters:
    - name: initial_liquidity_fraction
      param_type: float
      min_value: 0.0
      max_value: 1.0
      description: "Fraction of max_collateral_capacity to post at t=0. Value between 0.0 and 1.0."

  allowed_fields:
    # MINIMAL SET - only what's needed for Castro Initial Liquidity Game
    # Time context - distinguish t=0 (collateral posting) from t>=1
    - system_tick_in_day
    # Agent liquidity state
    - balance
    # Collateral state
    - remaining_collateral_capacity
    - posted_collateral
    - max_collateral_capacity
    # Transaction context (for payment_tree decisions)
    - ticks_to_deadline

  allowed_actions:
    payment_tree:
      - Release
      - Hold
    bank_tree:
      - NoAction
    strategic_collateral_tree:
      - PostCollateral
      - HoldCollateral

# Agents to optimize
optimized_agents:
  - BANK_A
  - BANK_B

# Output settings
output:
  directory: results
  database: exp1.db
  verbose: true

# Master seed for reproducibility
master_seed: 42
