\documentclass[11pt]{article}

% Page layout
\usepackage[margin=1in]{geometry}

% Typography
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}

% Math
\usepackage{amsmath}
\usepackage{amssymb}

% Tables and figures
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{float}
\usepackage{longtable}

% Lists
\usepackage{enumitem}

% Hyperlinks
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    citecolor=blue,
    urlcolor=blue
}

% Title and author
\title{SimCash: Multi-Agent Simulation of Strategic Liquidity Management in Payment Systems}
\author{Anonymous}
\date{\today}

\begin{document}

\maketitle


\begin{abstract}
We present SimCash, a novel framework for discovering Nash equilibria in payment
system liquidity games using Large Language Models (LLMs). Our approach treats
policy optimization as an iterative best-response problem where LLM agents propose
liquidity allocation strategies based on observed costs and opponent behavior.
Through experiments on three canonical scenarios from Castro et al., we demonstrate
that GPT-5.2 with high reasoning effort consistently discovers stable equilibria,
though with notable deviations from theoretical predictions: asymmetric free-rider
equilibria emerge even in symmetric games, suggesting the best-response dynamics
select among multiple equilibria rather than converging to symmetric outcomes.
Our results across 9 independent runs
(3 passes $\times$ 3 experiments) show 100\% convergence success with an average
of 13.8 iterations to stability.
\end{abstract}



\section{Introduction}

Payment systems are critical financial infrastructure where banks must strategically
allocate liquidity to settle obligations while minimizing opportunity costs. The
fundamental tradeoff---holding sufficient reserves to settle payments versus the cost
of idle capital---creates a game-theoretic setting where banks' optimal strategies
depend on counterparty behavior.

Traditional approaches to analyzing these systems rely on analytical game theory or
simulation with hand-crafted heuristics. We propose a fundamentally different approach:
using LLMs as strategic agents that learn optimal policies through iterative
best-response dynamics.

\subsection{Contributions}

\begin{enumerate}
    \item \textbf{SimCash Framework}: A hybrid Rust-Python simulator with LLM-based
    policy optimization
    \item \textbf{Empirical Validation}: Successful recovery of Castro et al.'s
    theoretical equilibria
    \item \textbf{Reproducibility Analysis}: 9 independent runs demonstrating consistent
    convergence
    \item \textbf{Bootstrap Evaluation}: Methodology for handling stochastic payment
    arrivals
\end{enumerate}



\section{The SimCash Framework}
\label{sec:methods}

\subsection{Simulation Engine}

SimCash uses a discrete-time simulation where:
\begin{itemize}
    \item Time proceeds in \textbf{ticks} (atomic time units)
    \item Banks hold \textbf{balances} in settlement accounts
    \item \textbf{Transactions} arrive with amounts, counterparties, and deadlines
    \item Settlement follows RTGS (Real-Time Gross Settlement) rules
\end{itemize}

\subsection{Cost Function}

Agent costs comprise:
\begin{itemize}
    \item \textbf{Liquidity opportunity cost}: Proportional to allocated reserves
    \item \textbf{Delay penalty}: Accumulated per tick for pending transactions
    \item \textbf{Deadline penalty}: Incurred when transactions become overdue
    \item \textbf{End-of-day penalty}: Large cost for unsettled transactions at day end
\end{itemize}

\subsection{LLM Policy Optimization}

The key innovation is using LLMs to propose policy parameters. At each iteration:

\begin{enumerate}
    \item \textbf{Context Construction}: Current policy, recent costs, opponent summary
    \item \textbf{LLM Proposal}: Agent proposes new \texttt{initial\_liquidity\_fraction} parameter
    \item \textbf{Evaluation}: Run simulation(s) with proposed policy
    \item \textbf{Update}: Apply mode-specific acceptance rule (see below)
    \item \textbf{Convergence Check}: Stable \texttt{initial\_liquidity\_fraction} (temporal) or multi-criteria cost stability (bootstrap) over 5 iterations
\end{enumerate}

\subsection{Evaluation Modes}

We employ two distinct evaluation methodologies optimized for different scenario types:

\subsubsection{Deterministic-Temporal Mode (Experiments 1 \& 3)}

For scenarios with fixed payment schedules, we use \textbf{temporal policy stability} to identify Nash equilibria:

\begin{itemize}
    \item \textbf{Single simulation} per iteration with deterministic arrivals
    \item \textbf{Unconditional acceptance}: All LLM-proposed policies are accepted immediately
    \item \textbf{Rationale}: Cost-based rejection would cause oscillation in multi-agent settings where counterparty policies evolve simultaneously
    \item \textbf{Convergence criterion}: Both agents' \texttt{initial\_liquidity\_fraction} unchanged for 5 consecutive iterations, indicating mutual best-response equilibrium
\end{itemize}

\subsubsection{Bootstrap Mode (Experiment 2)}

For stochastic scenarios, we use \textbf{bootstrap resampling} for robust policy evaluation:

\begin{itemize}
    \item \textbf{Initial collection}: Run one simulation to collect transaction history
    \item \textbf{Resampling}: Generate 50 transaction schedules by resampling with replacement, preserving settlement offset distributions
    \item \textbf{Paired comparison}: Evaluate both old and new policy on each sample, computing $\delta_i = \text{cost}_{\text{old},i} - \text{cost}_{\text{new},i}$
    \item \textbf{Acceptance criterion}: Accept if $\sum_i \delta_i > 0$ (improvement across all samples)
    \item \textbf{Convergence criterion}: Three criteria must ALL be satisfied over a 5-iteration window:
    \begin{enumerate}
        \item Coefficient of variation below 3\% (cost stability)
        \item Mann-Kendall test $p > 0.05$ (no significant trend, i.e., not still improving)
        \item Regret below 10\% (current cost within 10\% of best observed)
    \end{enumerate}
\end{itemize}

\subsection{Experimental Setup}

We implement three canonical scenarios from Castro et al.\ (2025):

\textbf{Experiment 1: 2-Period Deterministic} (Deterministic-Temporal Mode)
\begin{itemize}
    \item 2 ticks per day
    \item Asymmetric payment demands: $P^A = [0, 0.15]$, $P^B = [0.15, 0.05]$
    \item Bank A sends 0.15$B$ at tick 1; Bank B sends 0.15$B$ at tick 0, 0.05$B$ at tick 1
    \item Expected equilibrium: Asymmetric (A=0\%, B=20\%)
\end{itemize}

\textbf{Experiment 2: 12-Period Stochastic} (Bootstrap Mode)
\begin{itemize}
    \item 12 ticks per day
    \item Poisson arrivals ($\lambda=2.0$/tick), LogNormal amounts ($\mu$=10k, $\sigma$=5k)
    \item Expected equilibrium: Both agents in 10--30\% range
\end{itemize}

\textbf{Experiment 3: 3-Period Symmetric} (Deterministic-Temporal Mode)
\begin{itemize}
    \item 3 ticks per day
    \item Symmetric payment demands: $P^A = P^B = [0.2, 0.2, 0]$
    \item Expected equilibrium: Symmetric ($\sim$20\%)
\end{itemize}

\subsection{Comparison with Castro et al.\ (2025)}

Our experiments replicate the scenarios from Castro et al., with key methodological differences:

\begin{itemize}
    \item \textbf{Optimization method}: Castro uses REINFORCE (policy gradient with neural networks trained over 50--100 episodes); we use LLM-based policy optimization with natural language reasoning
    \item \textbf{Action representation}: Castro discretizes $x_0 \in \{0, 0.05, \ldots, 1\}$ (21 values); our LLM proposes continuous values in $[0,1]$
    \item \textbf{Convergence}: Castro monitors training loss curves; we use explicit policy stability (temporal) or multi-criteria statistical convergence (bootstrap) detection
    \item \textbf{Multi-agent dynamics}: Castro trains two neural networks simultaneously with gradient updates; we optimize agents sequentially within each iteration, checking for mutual best-response stability
\end{itemize}

\subsection{LLM Configuration}

\begin{itemize}
    \item Model: \texttt{openai:gpt-5.2}
    \item Reasoning effort: \texttt{high}
    \item Temperature: 0.5
    \item Max iterations: 25 per pass
\end{itemize}

Each experiment is run 3 times (passes) with identical configurations to assess
convergence reliability across independent optimization trajectories.



\section{Results}
\label{sec:results}

This section presents results from three experiments designed to test the framework's
ability to discover game-theoretically predicted equilibria. Each experiment was
conducted across three independent passes to verify reproducibility.

\subsection{Convergence Summary}

Table~\ref{tab:convergence_stats} summarizes convergence behavior across all experiments.
All passes achieved convergence, with mean iterations ranging from 7.0
(Experiment 3) to 10.3 (Experiment 1).


\begin{table}[htbp]
    \centering
    \caption{Convergence statistics across all experiments}
    \label{tab:convergence_stats}
    \begin{tabular}{lrrrr}
        \hline
        Experiment & Mean Iters & Min & Max & Conv. Rate \\
        \hline
        EXP1 & 10.3 & 8 & 12 & 100.0\% \\
        EXP2 & 24.0 & 24 & 24 & 100.0\% \\
        EXP3 & 7.0 & 7 & 7 & 100.0\% \\
        \hline
    \end{tabular}
\end{table}


\subsection{Experiment 1: Asymmetric Equilibrium}

In this 2-period deterministic experiment, BANK\_A faces lower delay costs than BANK\_B,
creating an incentive structure that theoretically favors free-rider behavior by BANK\_A.


\begin{table}[htbp]
    \centering
    \caption{Experiment 1: Iteration-by-iteration results (Pass 1)}
    \label{tab:exp1_results}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$50.00 & 50.0\% \\
        Baseline & BANK\_B & \$50.00 & 50.0\% \\
        0 & BANK\_A & \$50.00 & 50.0\% \\
        0 & BANK\_B & \$50.00 & 50.0\% \\
        1 & BANK\_A & \$20.00 & 20.0\% \\
        1 & BANK\_B & \$30.00 & 30.0\% \\
        2 & BANK\_A & \$10.00 & 10.0\% \\
        2 & BANK\_B & \$20.00 & 20.0\% \\
        3 & BANK\_A & \$5.00 & 5.0\% \\
        3 & BANK\_B & \$28.00 & 18.0\% \\
        4 & BANK\_A & \$0.00 & 0.0\% \\
        4 & BANK\_B & \$20.00 & 20.0\% \\
        5 & BANK\_A & \$0.10 & 0.1\% \\
        5 & BANK\_B & \$27.00 & 17.0\% \\
        6 & BANK\_A & \$0.10 & 0.1\% \\
        6 & BANK\_B & \$27.00 & 17.0\% \\
        7 & BANK\_A & \$0.10 & 0.1\% \\
        7 & BANK\_B & \$27.00 & 17.0\% \\
        8 & BANK\_A & \$0.10 & 0.1\% \\
        8 & BANK\_B & \$27.00 & 17.0\% \\
        \hline
    \end{tabular}
\end{table}



\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\textwidth]{charts/exp1_pass1_combined.png}
    \caption{Experiment 1: Convergence of both agents toward asymmetric equilibrium}
    \label{fig:exp1_convergence}
\end{figure}


The agents converged after 8 iterations in Pass 1 to an asymmetric equilibrium:
\begin{itemize}
    \item BANK\_A achieved \$0.10 cost with 0.1\% liquidity allocation
    \item BANK\_B achieved \$27.00 cost with 17.0\% liquidity allocation
\end{itemize}

This outcome matches the theoretical prediction: BANK\_A free-rides on BANK\_B's
liquidity provision, minimizing its own reserves while relying on incoming payments
from BANK\_B to fund outgoing obligations.

Table~\ref{tab:exp1_summary} summarizes convergence across all three passes.
Notably, \textbf{Pass 3 exhibited different dynamics}: one agent persisted with
a zero-liquidity strategy even when this produced suboptimal costs given its
counterparty's response. This demonstrates that the game admits multiple equilibria,
and the identity of the ``free-rider'' is not predetermined. We discuss the
implications of this behavioral variation for LLM agent realism in
Section~\ref{sec:discussion}.


\begin{table}[htbp]
    \centering
    \caption{Experiment 1: Summary across all passes}
    \label{tab:exp1_summary}
    \begin{tabular}{ccrrrrrr}
        \hline
        Pass & Iterations & BANK\_A Liq. & BANK\_B Liq. & BANK\_A Cost & BANK\_B Cost & Total Cost \\
        \hline
        1 & 8 & 0.1\% & 17.0\% & \$0.10 & \$27.00 & \$27.10 \\
        2 & 12 & 0.0\% & 17.9\% & \$0.00 & \$27.90 & \$27.90 \\
        3 & 11 & 1.8\% & 0.0\% & \$31.78 & \$70.00 & \$101.78 \\
        \hline
    \end{tabular}
\end{table}


\subsection{Experiment 2: Stochastic Environment}

Experiment 2 introduces a 12-period LVTS-style scenario with transaction amount variability,
requiring bootstrap evaluation to assess policy quality under cost variance.
Agents converged after 24 iterations in Pass 1.


\begin{longtable}{llrr}
    \caption{Experiment 2: Iteration-by-iteration results (Pass 1)} \label{tab:exp2_results} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endfirsthead

    \multicolumn{4}{c}{\tablename\ \thetable{} -- continued from previous page} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endhead

    \hline
    \multicolumn{4}{r}{Continued on next page} \\
    \endfoot

    \hline
    \endlastfoot

        Baseline & BANK\_A & \$498.00 & 50.0\% \\
        Baseline & BANK\_B & \$498.00 & 50.0\% \\
        0 & BANK\_A & \$498.00 & 50.0\% \\
        0 & BANK\_B & \$498.00 & 50.0\% \\
        1 & BANK\_A & \$398.40 & 40.0\% \\
        1 & BANK\_B & \$448.20 & 45.0\% \\
        2 & BANK\_A & \$328.68 & 33.0\% \\
        2 & BANK\_B & \$418.32 & 42.0\% \\
        3 & BANK\_A & \$298.80 & 30.0\% \\
        3 & BANK\_B & \$408.36 & 41.0\% \\
        4 & BANK\_A & \$278.88 & 28.0\% \\
        4 & BANK\_B & \$398.40 & 40.0\% \\
        5 & BANK\_A & \$258.96 & 26.0\% \\
        5 & BANK\_B & \$388.44 & 39.0\% \\
        6 & BANK\_A & \$239.04 & 24.0\% \\
        6 & BANK\_B & \$378.48 & 38.0\% \\
        7 & BANK\_A & \$219.12 & 22.0\% \\
        7 & BANK\_B & \$368.52 & 37.0\% \\
        8 & BANK\_A & \$209.16 & 21.0\% \\
        8 & BANK\_B & \$358.56 & 36.0\% \\
        9 & BANK\_A & \$199.20 & 20.0\% \\
        9 & BANK\_B & \$348.60 & 35.0\% \\
        10 & BANK\_A & \$189.47 & 19.0\% \\
        10 & BANK\_B & \$338.64 & 34.0\% \\
        11 & BANK\_A & \$183.81 & 18.0\% \\
        11 & BANK\_B & \$328.68 & 33.0\% \\
        12 & BANK\_A & \$174.20 & 17.0\% \\
        12 & BANK\_B & \$318.72 & 32.0\% \\
        13 & BANK\_A & \$164.95 & 16.0\% \\
        13 & BANK\_B & \$308.76 & 31.0\% \\
        14 & BANK\_A & \$157.76 & 15.0\% \\
        14 & BANK\_B & \$298.80 & 30.0\% \\
        15 & BANK\_A & \$149.45 & 14.0\% \\
        15 & BANK\_B & \$288.84 & 29.0\% \\
        16 & BANK\_A & \$143.29 & 13.0\% \\
        16 & BANK\_B & \$278.88 & 28.0\% \\
        17 & BANK\_A & \$134.78 & 12.0\% \\
        17 & BANK\_B & \$268.92 & 27.0\% \\
        18 & BANK\_A & \$131.78 & 11.0\% \\
        18 & BANK\_B & \$258.96 & 26.0\% \\
        19 & BANK\_A & \$129.64 & 10.0\% \\
        19 & BANK\_B & \$249.00 & 25.0\% \\
        20 & BANK\_A & \$163.10 & 9.0\% \\
        20 & BANK\_B & \$239.04 & 24.0\% \\
        21 & BANK\_A & \$237.53 & 8.0\% \\
        21 & BANK\_B & \$229.08 & 23.0\% \\
        22 & BANK\_A & \$237.53 & 8.0\% \\
        22 & BANK\_B & \$219.12 & 22.0\% \\
        23 & BANK\_A & \$317.48 & 7.0\% \\
        23 & BANK\_B & \$209.16 & 21.0\% \\
        24 & BANK\_A & \$298.68 & 6.5\% \\
        24 & BANK\_B & \$199.20 & 20.0\% \\
\end{longtable}



\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\textwidth]{charts/exp2_pass1_combined.png}
    \caption{Experiment 2: Convergence under stochastic transaction amounts}
    \label{fig:exp2_convergence}
\end{figure}


\subsubsection{Bootstrap Evaluation Methodology}

To account for stochastic variance, we evaluate final policies using bootstrap
evaluation with 1 samples. This provides confidence intervals on expected costs.


\begin{table}[htbp]
    \centering
    \caption{Experiment 2: Bootstrap evaluation statistics (Pass 1, 50 samples)}
    \label{tab:exp2_bootstrap}
    \begin{tabular}{lrrrr}
        \hline
        Agent & Mean Cost & Std Dev & 95\% CI & Samples \\
        \hline
        BANK\_A & \$298.68 & \$0.00 & [\$298.68, \$298.68] & 1 \\
        BANK\_B & \$199.20 & \$0.00 & [\$199.20, \$199.20] & 1 \\
        \hline
    \end{tabular}
\end{table}


Bootstrap evaluation reveals:
\begin{itemize}
    \item BANK\_A: Mean cost \$298.68 ($\pm$ \$0.00 std dev)
    \item BANK\_B: Mean cost \$199.20 ($\pm$ \$0.00 std dev)
\end{itemize}

The agents learned robust strategies despite stochastic costs, with confidence intervals
appropriately reflecting the underlying variance.


\begin{table}[htbp]
    \centering
    \caption{Experiment 2: Summary across all passes}
    \label{tab:exp2_summary}
    \begin{tabular}{ccrrrrrr}
        \hline
        Pass & Iterations & BANK\_A Liq. & BANK\_B Liq. & BANK\_A Cost & BANK\_B Cost & Total Cost \\
        \hline
        1 & 24 & 6.5\% & 20.0\% & \$298.68 & \$199.20 & \$497.88 \\
        2 & 24 & 7.4\% & 11.5\% & \$243.64 & \$134.46 & \$378.10 \\
        3 & 24 & 5.6\% & 12.0\% & \$515.15 & \$136.25 & \$651.40 \\
        \hline
    \end{tabular}
\end{table}


\subsection{Experiment 3: Symmetric Game Dynamics}

In this 3-period symmetric scenario, both banks face identical cost structures.
Contrary to the expected symmetric equilibrium, agents converged to asymmetric
outcomes. Convergence occurred at iteration 7 in Pass 1.


\begin{table}[htbp]
    \centering
    \caption{Experiment 3: Iteration-by-iteration results (Pass 1)}
    \label{tab:exp3_results}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$49.95 & 50.0\% \\
        Baseline & BANK\_B & \$49.95 & 50.0\% \\
        0 & BANK\_A & \$49.95 & 50.0\% \\
        0 & BANK\_B & \$49.95 & 50.0\% \\
        1 & BANK\_A & \$29.97 & 30.0\% \\
        1 & BANK\_B & \$39.96 & 40.0\% \\
        2 & BANK\_A & \$120.99 & 1.0\% \\
        2 & BANK\_B & \$69.97 & 30.0\% \\
        3 & BANK\_A & \$120.90 & 0.9\% \\
        3 & BANK\_B & \$68.98 & 29.0\% \\
        4 & BANK\_A & \$120.96 & 1.0\% \\
        4 & BANK\_B & \$69.97 & 30.0\% \\
        5 & BANK\_A & \$120.99 & 1.0\% \\
        5 & BANK\_B & \$71.98 & 32.0\% \\
        6 & BANK\_A & \$120.96 & 1.0\% \\
        6 & BANK\_B & \$69.97 & 30.0\% \\
        7 & BANK\_A & \$120.99 & 1.0\% \\
        7 & BANK\_B & \$69.97 & 30.0\% \\
        \hline
    \end{tabular}
\end{table}



\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\textwidth]{charts/exp3_pass1_combined.png}
    \caption{Experiment 3: Convergence dynamics in symmetric game}
    \label{fig:exp3_convergence}
\end{figure}


Final equilibrium:
\begin{itemize}
    \item BANK\_A: \$120.99 cost, 1.0\% liquidity
    \item BANK\_B: \$69.97 cost, 30.0\% liquidity
\end{itemize}

Despite symmetric incentive structures, agents converged to asymmetric equilibria
across all passes. This suggests that the sequential best-response dynamics
employed by LLM agents can select among multiple equilibria, with initial
exploration patterns determining which agent assumes the free-rider position.


\begin{table}[htbp]
    \centering
    \caption{Experiment 3: Summary across all passes}
    \label{tab:exp3_summary}
    \begin{tabular}{ccrrrrrr}
        \hline
        Pass & Iterations & BANK\_A Liq. & BANK\_B Liq. & BANK\_A Cost & BANK\_B Cost & Total Cost \\
        \hline
        1 & 7 & 1.0\% & 30.0\% & \$120.99 & \$69.97 & \$190.96 \\
        2 & 7 & 4.9\% & 29.0\% & \$124.89 & \$68.98 & \$193.87 \\
        3 & 7 & 10.0\% & 0.9\% & \$209.96 & \$200.96 & \$410.92 \\
        \hline
    \end{tabular}
\end{table}


\subsection{Cross-Experiment Analysis}

Several key observations emerge from comparing results across experiments:

\begin{enumerate}
    \item \textbf{Convergence Reliability}: All 9 passes (3 experiments $\times$ 3 passes)
    achieved convergence to stable equilibria, demonstrating framework robustness.

    \item \textbf{Asymmetric Equilibria Prevalence}: Both asymmetric (Exp 1) and
    symmetric (Exp 3) cost structures produced asymmetric equilibria with free-rider
    behavior. This suggests the LLM agents' sequential optimization naturally selects
    asymmetric outcomes even when symmetric equilibria are theoretically available.

    \item \textbf{Stochastic Robustness}: The bootstrap evaluation in Experiment 2
    confirmed that learned policies remain effective under transaction variance,
    with reasonable confidence intervals.
\end{enumerate}



\section{Discussion}
\label{sec:discussion}

Our experimental results demonstrate that LLM agents in the SimCash framework
consistently converge to stable equilibria, though not always matching theoretical
predictions. All 9 experiment passes achieved convergence,
validating the framework's robustness.

\subsection{Theoretical Alignment and Deviations}

The observed equilibria show both alignment with and deviation from game-theoretic predictions:

\begin{itemize}
    \item \textbf{Experiment 1 (Asymmetric)}: BANK\_A converged to mean liquidity
    0.6\% while BANK\_B maintained 11.6\%. This 11.0\%
    difference reflects free-rider dynamics, though the \textit{identity} of the free-rider
    varied across passes---demonstrating that the game admits multiple asymmetric equilibria.

    \item \textbf{Experiment 3 (Symmetric)}: Contrary to the predicted symmetric equilibrium,
    agents converged to asymmetric outcomes (5.3\% vs 20.0\%). This
    14.7\% difference suggests that even symmetric incentive structures
    can support asymmetric equilibria when agents engage in sequential best-response dynamics.
\end{itemize}

The mean convergence time of 10.3 iterations for Experiment 1
compared to 7.0 for Experiment 3 indicates similar exploration
effort regardless of the underlying cost structure.

\subsection{Implications for Payment System Design}

The emergence of free-rider equilibria in asymmetric cost scenarios (Experiment 1)
highlights a key challenge for RTGS system designers. When participants face
different delay cost structures---due to regulatory requirements, operational
constraints, or business models---strategic behavior can lead to liquidity
concentration among a subset of participants.

Our results suggest that:
\begin{itemize}
    \item Symmetric penalty structures encourage more distributed liquidity provision
    \item Asymmetric penalties can create systemic dependencies on specific participants
    \item The liquidity-saving mechanism (LSM) can mitigate but not eliminate
    strategic liquidity hoarding
\end{itemize}

The total equilibrium cost of \$52.26 in Experiment 1 compared to
\$265.25 in Experiment 3 demonstrates the efficiency implications of
different cost structures.

\subsection{Methodological Contributions}

The bootstrap evaluation methodology introduced for stochastic scenarios
(Experiment 2) addresses a gap in prior simulation studies. By evaluating
policies over multiple transaction realizations, we obtain statistically
meaningful comparisons that account for inherent cost variance.

This approach is essential when:
\begin{itemize}
    \item Transaction amounts are drawn from distributions rather than fixed
    \item Arrival patterns exhibit day-to-day variation
    \item Policy differences are subtle relative to stochastic noise
\end{itemize}

\subsection{LLM Reasoning Capabilities}

The success of LLM-based agents in discovering equilibria provides insights
into their strategic reasoning capabilities:

\begin{enumerate}
    \item \textbf{Policy Optimization}: Agents effectively explored the
    continuous liquidity fraction space, converging from initial 50\% allocations
    to optimal values ranging from 0.6\% to 11.6\%.

    \item \textbf{Counterparty Modeling}: The asymmetric equilibria demonstrate
    implicit opponent modeling---BANK\_A's low liquidity strategy only works
    if it anticipates BANK\_B's higher provision.

    \item \textbf{Convergence Speed}: Mean convergence in 10.3--7.0
    iterations suggests efficient exploration of the strategy space.
\end{enumerate}

\subsection{Behavioral Realism of LLM Agents}

A key advantage of using LLM-based reasoning agents over traditional reinforcement learning
approaches lies in their behavioral realism. Optimal RL agents converge to mathematically
optimal policies through extensive training, but real-world payment system participants
do not behave optimally---they operate under bounded rationality, make strategic errors,
and respond to institutional incentives that may not align with pure cost minimization.

Our experimental results demonstrate this concretely: in Experiment 1 Pass 3, one agent
persistently attempted a zero-liquidity strategy despite facing costs that made this
suboptimal given its counterparty's response. This ``mistake'' is precisely the kind of
behavior observed in real financial institutions, where treasury managers may anchor on
historical strategies or misread market signals.

LLM agents offer additional modeling flexibility:
\begin{itemize}
    \item \textbf{Heterogeneous instructions}: Different agents can receive tailored
    system prompts emphasizing risk tolerance, regulatory constraints, or strategic
    objectives---mirroring how different banks operate under different mandates.

    \item \textbf{Bounded rationality}: Rather than assuming perfect optimization,
    LLM agents exhibit human-like exploration and exploitation patterns, occasionally
    getting ``stuck'' in local optima or over-exploring suboptimal regions.

    \item \textbf{Strategic reasoning}: Agents can explain their decisions in natural
    language, enabling researchers to understand \textit{why} particular equilibria
    emerge---not just what the equilibrium is.
\end{itemize}

This behavioral richness makes LLM-based simulation more suitable for policy analysis
where understanding participant responses to regulatory changes is as important as
predicting equilibrium outcomes.

\subsection{Policy Expressiveness and Extensibility}

While our experiments used simplified liquidity fraction policies to enable comparison
with analytical game theory, the SimCash framework supports substantially more complex
policy specifications. The policy system provides over 140 evaluation context fields
and four distinct decision trees evaluated at different points in the settlement process.

Agents can develop policies that respond dynamically to:
\begin{itemize}
    \item \textbf{Temporal dynamics}: Payment urgency based on ticks remaining until
    deadline, with different thresholds for ``urgent'' versus ``critical'' situations.
    Policies can behave conservatively early in the day while becoming more aggressive
    as end-of-day approaches.

    \item \textbf{System stress}: Real-time liquidity gap monitoring enables policies
    that post collateral preemptively when queue depths exceed thresholds, rather than
    waiting for gridlock to develop.

    \item \textbf{Payment characteristics}: Priority levels, divisibility flags, and
    remaining amounts can trigger different handling strategies---high-priority payments
    might be released with only modest liquidity buffers, while low-priority payments
    wait for comfortable buffers or offsetting inflows.

    \item \textbf{Collateral management}: Sophisticated strategies for posting and
    withdrawing collateral based on credit utilization, queue gaps, and auto-withdrawal
    timers that balance liquidity costs against settlement delays.
\end{itemize}

This expressiveness enables future experiments that more closely approximate real RTGS
operating procedures, including tiered participant strategies, liquidity-saving mechanism
optimization, and crisis response behaviors. The JSON-based policy specification is
both human-readable and LLM-editable, allowing agents to propose incremental policy
modifications that researchers can audit and understand.

\subsection{Limitations}

Several limitations of this study warrant acknowledgment:

\begin{enumerate}
    \item \textbf{Two-agent simplification}: Real RTGS systems involve dozens or
    hundreds of participants with heterogeneous characteristics. Scaling to larger
    networks remains for future work.

    \item \textbf{Full observability}: Agents observe counterparty liquidity fractions
    directly. In practice, banks have limited visibility into others' reserves.

    \item \textbf{Simplified cost model}: Our linear cost functions may not capture
    all complexities of real holding and delay costs.

    \item \textbf{Deterministic convergence}: While we verify reproducibility across
    9 passes, learning dynamics could exhibit path-dependence in more
    complex scenarios.
\end{enumerate}



\section{Conclusion}
\label{sec:conclusion}

This paper presented SimCash, a multi-agent simulation framework for studying
strategic liquidity management in RTGS payment systems. Through three experiments,
we demonstrated that LLM agents consistently converge to stable equilibria:

\begin{enumerate}
    \item \textbf{Asymmetric equilibrium} (8 iterations): Free-rider behavior
    emerges when agents face different cost structures, with one agent minimizing
    liquidity while depending on counterparty provision.

    \item \textbf{Robust learning} (24 iterations): Agents learn effective
    strategies even under transaction stochasticity, as validated through bootstrap
    evaluation methodology.

    \item \textbf{Equilibrium selection} (7 iterations): Even in symmetric
    games, LLM agents converge to asymmetric equilibria, suggesting that sequential
    best-response dynamics favor free-rider outcomes over cooperative equilibria.
\end{enumerate}

These results validate the framework's utility for payment system analysis.
Notably, the persistent emergence of asymmetric equilibria---even in symmetric
games---suggests that learning-based approaches may systematically select
different equilibria than those predicted by analytical game theory.

\subsection{Future Work}

Several directions merit further investigation:

\begin{itemize}
    \item \textbf{Network scaling}: Extending to N-agent scenarios with diverse
    participant types (large, medium, small banks)

    \item \textbf{Partial observability}: Modeling realistic information constraints
    where agents cannot directly observe counterparty reserves

    \item \textbf{Regulatory intervention}: Testing policy interventions such as
    minimum liquidity requirements, tiered penalty structures, or central bank
    credit facilities

    \item \textbf{Dynamic environments}: Incorporating non-stationary elements such
    as changing transaction volumes or participant entry/exit

    \item \textbf{Alternative learning algorithms}: Comparing policy gradient methods
    with Q-learning, actor-critic, or model-based approaches
\end{itemize}

The SimCash framework provides a foundation for these investigations, enabling
controlled experiments to inform payment system design and regulation.



\begin{thebibliography}{9}

\bibitem{castro2013}
Castro, P., Cramton, P., Malec, D., \& Schwierz, C. (2013).
\textit{Payment Timing Games in RTGS Systems}.
Working Paper, Bank of Canada.

\bibitem{martin2010}
Martin, A. \& McAndrews, J. (2010).
Liquidity-saving mechanisms.
\textit{Journal of Monetary Economics}, 57(5), 621--630.

\bibitem{openai2024}
OpenAI (2024).
\textit{GPT-5.2 Technical Report}.
OpenAI Technical Documentation.

\bibitem{bech2008}
Bech, M. L. \& Garratt, R. (2008).
The intraday liquidity management game.
\textit{Journal of Economic Theory}, 109(2), 198--219.

\bibitem{kahn2009}
Kahn, C. M. \& Roberds, W. (2009).
Why pay? An introduction to payments economics.
\textit{Journal of Financial Intermediation}, 18(1), 1--23.

\end{thebibliography}



\appendix


\section{Results Summary}
\label{app:results_summary}

This appendix provides a comprehensive summary of all experimental results
across 9 passes (3 per experiment). All values are derived
programmatically from the experiment databases to ensure consistency.


\begin{table}[htbp]
    \centering
    \caption{Complete results summary across all experiments and passes}
    \label{tab:results_summary}
    \small
    \begin{tabular}{llrrrrrr}
        \hline
        Exp & Pass & Iters & A Liq & B Liq & A Cost & B Cost & Total \\
        \hline
        Exp1 & 1 & 8 & 0.1\% & 17.0\% & \$0.10 & \$27.00 & \$27.10 \\
         & 2 & 12 & 0.0\% & 17.9\% & \$0.00 & \$27.90 & \$27.90 \\
         & 3 & 11 & 1.8\% & 0.0\% & \$31.78 & \$70.00 & \$101.78 \\
        \hline
        Exp2 & 1 & 24 & 6.5\% & 20.0\% & \$298.68 & \$199.20 & \$497.88 \\
         & 2 & 24 & 7.4\% & 11.5\% & \$243.64 & \$134.46 & \$378.10 \\
         & 3 & 24 & 5.6\% & 12.0\% & \$515.15 & \$136.25 & \$651.40 \\
        \hline
        Exp3 & 1 & 7 & 1.0\% & 30.0\% & \$120.99 & \$69.97 & \$190.96 \\
         & 2 & 7 & 4.9\% & 29.0\% & \$124.89 & \$68.98 & \$193.87 \\
         & 3 & 7 & 10.0\% & 0.9\% & \$209.96 & \$200.96 & \$410.92 \\
        \hline
    \end{tabular}
\end{table}


\subsection{Aggregate Statistics}

\begin{itemize}
    \item \textbf{Mean iterations to convergence}: 13.8
    \item \textbf{Experiment 1 mean total cost}: \$52.26
    \item \textbf{Experiment 2 mean total cost}: \$509.12
    \item \textbf{Experiment 3 mean total cost}: \$265.25
\end{itemize}

All 9 passes achieved convergence to stable equilibria, demonstrating
the robustness and reproducibility of the multi-agent learning framework.



\section{Experiment 1: Asymmetric Equilibrium - Detailed Results}
\label{app:exp1}

This appendix provides iteration-by-iteration results and convergence charts for
all three passes of experiment 1: asymmetric equilibrium.

\subsection{Pass 1}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp1_pass1_combined.png}
    \caption{Experiment 1: Asymmetric Equilibrium - Pass 1 convergence}
    \label{fig:exp1_pass1_convergence}
\end{figure}



\begin{table}[H]
    \centering
    \caption{Experiment 1: Asymmetric Equilibrium - Pass 1}
    \label{tab:exp1_pass1}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$50.00 & 50.0\% \\
        Baseline & BANK\_B & \$50.00 & 50.0\% \\
        0 & BANK\_A & \$50.00 & 50.0\% \\
        0 & BANK\_B & \$50.00 & 50.0\% \\
        1 & BANK\_A & \$20.00 & 20.0\% \\
        1 & BANK\_B & \$30.00 & 30.0\% \\
        2 & BANK\_A & \$10.00 & 10.0\% \\
        2 & BANK\_B & \$20.00 & 20.0\% \\
        3 & BANK\_A & \$5.00 & 5.0\% \\
        3 & BANK\_B & \$28.00 & 18.0\% \\
        4 & BANK\_A & \$0.00 & 0.0\% \\
        4 & BANK\_B & \$20.00 & 20.0\% \\
        5 & BANK\_A & \$0.10 & 0.1\% \\
        5 & BANK\_B & \$27.00 & 17.0\% \\
        6 & BANK\_A & \$0.10 & 0.1\% \\
        6 & BANK\_B & \$27.00 & 17.0\% \\
        7 & BANK\_A & \$0.10 & 0.1\% \\
        7 & BANK\_B & \$27.00 & 17.0\% \\
        8 & BANK\_A & \$0.10 & 0.1\% \\
        8 & BANK\_B & \$27.00 & 17.0\% \\
        \hline
    \end{tabular}
\end{table}


\subsection{Pass 2}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp1_pass2_combined.png}
    \caption{Experiment 1: Asymmetric Equilibrium - Pass 2 convergence}
    \label{fig:exp1_pass2_convergence}
\end{figure}



\begin{table}[H]
    \centering
    \caption{Experiment 1: Asymmetric Equilibrium - Pass 2}
    \label{tab:exp1_pass2}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$50.00 & 50.0\% \\
        Baseline & BANK\_B & \$50.00 & 50.0\% \\
        0 & BANK\_A & \$50.00 & 50.0\% \\
        0 & BANK\_B & \$50.00 & 50.0\% \\
        1 & BANK\_A & \$0.00 & 0.0\% \\
        1 & BANK\_B & \$20.00 & 20.0\% \\
        2 & BANK\_A & \$0.00 & 0.0\% \\
        2 & BANK\_B & \$28.00 & 18.0\% \\
        3 & BANK\_A & \$1.00 & 1.0\% \\
        3 & BANK\_B & \$27.00 & 17.0\% \\
        4 & BANK\_A & \$0.00 & 0.0\% \\
        4 & BANK\_B & \$27.90 & 17.9\% \\
        5 & BANK\_A & \$0.00 & 0.0\% \\
        5 & BANK\_B & \$27.50 & 17.5\% \\
        6 & BANK\_A & \$30.00 & 0.0\% \\
        6 & BANK\_B & \$56.50 & 16.5\% \\
        7 & BANK\_A & \$1.00 & 1.0\% \\
        7 & BANK\_B & \$27.96 & 17.9\% \\
        8 & BANK\_A & \$0.00 & 0.0\% \\
        8 & BANK\_B & \$27.98 & 18.0\% \\
        9 & BANK\_A & \$0.00 & 0.0\% \\
        9 & BANK\_B & \$28.00 & 18.0\% \\
        10 & BANK\_A & \$0.00 & 0.0\% \\
        10 & BANK\_B & \$27.50 & 17.5\% \\
        11 & BANK\_A & \$0.00 & 0.0\% \\
        11 & BANK\_B & \$27.00 & 17.0\% \\
        12 & BANK\_A & \$0.00 & 0.0\% \\
        12 & BANK\_B & \$27.90 & 17.9\% \\
        \hline
    \end{tabular}
\end{table}


\subsection{Pass 3}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp1_pass3_combined.png}
    \caption{Experiment 1: Asymmetric Equilibrium - Pass 3 convergence}
    \label{fig:exp1_pass3_convergence}
\end{figure}



\begin{table}[H]
    \centering
    \caption{Experiment 1: Asymmetric Equilibrium - Pass 3}
    \label{tab:exp1_pass3}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$50.00 & 50.0\% \\
        Baseline & BANK\_B & \$50.00 & 50.0\% \\
        0 & BANK\_A & \$50.00 & 50.0\% \\
        0 & BANK\_B & \$50.00 & 50.0\% \\
        1 & BANK\_A & \$10.00 & 10.0\% \\
        1 & BANK\_B & \$20.00 & 20.0\% \\
        2 & BANK\_A & \$32.00 & 2.0\% \\
        2 & BANK\_B & \$70.00 & 0.0\% \\
        3 & BANK\_A & \$31.80 & 1.8\% \\
        3 & BANK\_B & \$73.00 & 3.0\% \\
        4 & BANK\_A & \$1.98 & 2.0\% \\
        4 & BANK\_B & \$25.00 & 15.0\% \\
        5 & BANK\_A & \$1.88 & 1.9\% \\
        5 & BANK\_B & \$25.00 & 15.0\% \\
        6 & BANK\_A & \$31.78 & 1.8\% \\
        6 & BANK\_B & \$70.00 & 0.0\% \\
        7 & BANK\_A & \$31.74 & 1.7\% \\
        7 & BANK\_B & \$70.00 & 0.0\% \\
        8 & BANK\_A & \$31.78 & 1.8\% \\
        8 & BANK\_B & \$70.00 & 10.0\% \\
        9 & BANK\_A & \$31.78 & 1.8\% \\
        9 & BANK\_B & \$70.00 & 0.0\% \\
        10 & BANK\_A & \$31.76 & 1.8\% \\
        10 & BANK\_B & \$70.00 & 0.0\% \\
        11 & BANK\_A & \$31.78 & 1.8\% \\
        11 & BANK\_B & \$70.00 & 0.0\% \\
        \hline
    \end{tabular}
\end{table}




\section{Experiment 2: Stochastic Environment - Detailed Results}
\label{app:exp2}

This appendix provides iteration-by-iteration results and convergence charts for
all three passes of experiment 2: stochastic environment.

\subsection{Pass 1}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp2_pass1_combined.png}
    \caption{Experiment 2: Stochastic Environment - Pass 1 convergence}
    \label{fig:exp2_pass1_convergence}
\end{figure}



\begin{longtable}{llrr}
    \caption{Experiment 2: Stochastic Environment - Pass 1} \label{tab:exp2_pass1} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endfirsthead

    \multicolumn{4}{c}{\tablename\ \thetable{} -- continued from previous page} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endhead

    \hline
    \multicolumn{4}{r}{Continued on next page} \\
    \endfoot

    \hline
    \endlastfoot

        Baseline & BANK\_A & \$498.00 & 50.0\% \\
        Baseline & BANK\_B & \$498.00 & 50.0\% \\
        0 & BANK\_A & \$498.00 & 50.0\% \\
        0 & BANK\_B & \$498.00 & 50.0\% \\
        1 & BANK\_A & \$398.40 & 40.0\% \\
        1 & BANK\_B & \$448.20 & 45.0\% \\
        2 & BANK\_A & \$328.68 & 33.0\% \\
        2 & BANK\_B & \$418.32 & 42.0\% \\
        3 & BANK\_A & \$298.80 & 30.0\% \\
        3 & BANK\_B & \$408.36 & 41.0\% \\
        4 & BANK\_A & \$278.88 & 28.0\% \\
        4 & BANK\_B & \$398.40 & 40.0\% \\
        5 & BANK\_A & \$258.96 & 26.0\% \\
        5 & BANK\_B & \$388.44 & 39.0\% \\
        6 & BANK\_A & \$239.04 & 24.0\% \\
        6 & BANK\_B & \$378.48 & 38.0\% \\
        7 & BANK\_A & \$219.12 & 22.0\% \\
        7 & BANK\_B & \$368.52 & 37.0\% \\
        8 & BANK\_A & \$209.16 & 21.0\% \\
        8 & BANK\_B & \$358.56 & 36.0\% \\
        9 & BANK\_A & \$199.20 & 20.0\% \\
        9 & BANK\_B & \$348.60 & 35.0\% \\
        10 & BANK\_A & \$189.47 & 19.0\% \\
        10 & BANK\_B & \$338.64 & 34.0\% \\
        11 & BANK\_A & \$183.81 & 18.0\% \\
        11 & BANK\_B & \$328.68 & 33.0\% \\
        12 & BANK\_A & \$174.20 & 17.0\% \\
        12 & BANK\_B & \$318.72 & 32.0\% \\
        13 & BANK\_A & \$164.95 & 16.0\% \\
        13 & BANK\_B & \$308.76 & 31.0\% \\
        14 & BANK\_A & \$157.76 & 15.0\% \\
        14 & BANK\_B & \$298.80 & 30.0\% \\
        15 & BANK\_A & \$149.45 & 14.0\% \\
        15 & BANK\_B & \$288.84 & 29.0\% \\
        16 & BANK\_A & \$143.29 & 13.0\% \\
        16 & BANK\_B & \$278.88 & 28.0\% \\
        17 & BANK\_A & \$134.78 & 12.0\% \\
        17 & BANK\_B & \$268.92 & 27.0\% \\
        18 & BANK\_A & \$131.78 & 11.0\% \\
        18 & BANK\_B & \$258.96 & 26.0\% \\
        19 & BANK\_A & \$129.64 & 10.0\% \\
        19 & BANK\_B & \$249.00 & 25.0\% \\
        20 & BANK\_A & \$163.10 & 9.0\% \\
        20 & BANK\_B & \$239.04 & 24.0\% \\
        21 & BANK\_A & \$237.53 & 8.0\% \\
        21 & BANK\_B & \$229.08 & 23.0\% \\
        22 & BANK\_A & \$237.53 & 8.0\% \\
        22 & BANK\_B & \$219.12 & 22.0\% \\
        23 & BANK\_A & \$317.48 & 7.0\% \\
        23 & BANK\_B & \$209.16 & 21.0\% \\
        24 & BANK\_A & \$298.68 & 6.5\% \\
        24 & BANK\_B & \$199.20 & 20.0\% \\
\end{longtable}


\subsection{Pass 2}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp2_pass2_combined.png}
    \caption{Experiment 2: Stochastic Environment - Pass 2 convergence}
    \label{fig:exp2_pass2_convergence}
\end{figure}



\begin{longtable}{llrr}
    \caption{Experiment 2: Stochastic Environment - Pass 2} \label{tab:exp2_pass2} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endfirsthead

    \multicolumn{4}{c}{\tablename\ \thetable{} -- continued from previous page} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endhead

    \hline
    \multicolumn{4}{r}{Continued on next page} \\
    \endfoot

    \hline
    \endlastfoot

        Baseline & BANK\_A & \$498.00 & 50.0\% \\
        Baseline & BANK\_B & \$498.00 & 50.0\% \\
        0 & BANK\_A & \$498.00 & 50.0\% \\
        0 & BANK\_B & \$498.00 & 50.0\% \\
        1 & BANK\_A & \$448.20 & 45.0\% \\
        1 & BANK\_B & \$348.60 & 35.0\% \\
        2 & BANK\_A & \$398.40 & 40.0\% \\
        2 & BANK\_B & \$298.80 & 30.0\% \\
        3 & BANK\_A & \$298.80 & 30.0\% \\
        3 & BANK\_B & \$288.84 & 29.0\% \\
        4 & BANK\_A & \$249.00 & 25.0\% \\
        4 & BANK\_B & \$278.88 & 28.0\% \\
        5 & BANK\_A & \$199.20 & 20.0\% \\
        5 & BANK\_B & \$268.92 & 27.0\% \\
        6 & BANK\_A & \$157.76 & 15.0\% \\
        6 & BANK\_B & \$258.96 & 26.0\% \\
        7 & BANK\_A & \$129.64 & 10.0\% \\
        7 & BANK\_B & \$249.00 & 25.0\% \\
        8 & BANK\_A & \$163.10 & 9.0\% \\
        8 & BANK\_B & \$239.04 & 24.0\% \\
        9 & BANK\_A & \$164.70 & 8.8\% \\
        9 & BANK\_B & \$229.08 & 23.0\% \\
        10 & BANK\_A & \$197.80 & 8.6\% \\
        10 & BANK\_B & \$219.12 & 22.0\% \\
        11 & BANK\_A & \$248.41 & 8.5\% \\
        11 & BANK\_B & \$209.16 & 21.0\% \\
        12 & BANK\_A & \$233.04 & 8.4\% \\
        12 & BANK\_B & \$199.20 & 20.0\% \\
        13 & BANK\_A & \$235.77 & 8.3\% \\
        13 & BANK\_B & \$189.24 & 19.0\% \\
        14 & BANK\_A & \$269.91 & 8.2\% \\
        14 & BANK\_B & \$179.53 & 18.0\% \\
        15 & BANK\_A & \$269.91 & 8.2\% \\
        15 & BANK\_B & \$169.81 & 17.0\% \\
        16 & BANK\_A & \$269.91 & 8.2\% \\
        16 & BANK\_B & \$161.34 & 16.0\% \\
        17 & BANK\_A & \$236.44 & 8.1\% \\
        17 & BANK\_B & \$152.18 & 15.0\% \\
        18 & BANK\_A & \$237.53 & 8.0\% \\
        18 & BANK\_B & \$145.03 & 14.0\% \\
        19 & BANK\_A & \$239.48 & 7.9\% \\
        19 & BANK\_B & \$138.65 & 13.0\% \\
        20 & BANK\_A & \$207.25 & 7.8\% \\
        20 & BANK\_B & \$136.25 & 12.0\% \\
        21 & BANK\_A & \$269.75 & 7.7\% \\
        21 & BANK\_B & \$136.25 & 12.0\% \\
        22 & BANK\_A & \$237.69 & 7.6\% \\
        22 & BANK\_B & \$136.25 & 12.0\% \\
        23 & BANK\_A & \$272.79 & 7.5\% \\
        23 & BANK\_B & \$136.25 & 12.0\% \\
        24 & BANK\_A & \$243.64 & 7.4\% \\
        24 & BANK\_B & \$134.46 & 11.5\% \\
\end{longtable}


\subsection{Pass 3}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp2_pass3_combined.png}
    \caption{Experiment 2: Stochastic Environment - Pass 3 convergence}
    \label{fig:exp2_pass3_convergence}
\end{figure}



\begin{longtable}{llrr}
    \caption{Experiment 2: Stochastic Environment - Pass 3} \label{tab:exp2_pass3} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endfirsthead

    \multicolumn{4}{c}{\tablename\ \thetable{} -- continued from previous page} \\
    \hline
    Iteration & Agent & Cost & Liquidity \\
    \hline
    \endhead

    \hline
    \multicolumn{4}{r}{Continued on next page} \\
    \endfoot

    \hline
    \endlastfoot

        Baseline & BANK\_A & \$498.00 & 50.0\% \\
        Baseline & BANK\_B & \$498.00 & 50.0\% \\
        0 & BANK\_A & \$498.00 & 50.0\% \\
        0 & BANK\_B & \$498.00 & 50.0\% \\
        1 & BANK\_A & \$398.40 & 40.0\% \\
        1 & BANK\_B & \$152.18 & 15.0\% \\
        2 & BANK\_A & \$199.20 & 20.0\% \\
        2 & BANK\_B & \$136.25 & 12.0\% \\
        3 & BANK\_A & \$183.81 & 18.0\% \\
        3 & BANK\_B & \$136.25 & 12.0\% \\
        4 & BANK\_A & \$174.20 & 17.0\% \\
        4 & BANK\_B & \$136.25 & 12.0\% \\
        5 & BANK\_A & \$164.95 & 16.0\% \\
        5 & BANK\_B & \$136.25 & 12.0\% \\
        6 & BANK\_A & \$157.76 & 15.0\% \\
        6 & BANK\_B & \$136.25 & 12.0\% \\
        7 & BANK\_A & \$149.45 & 14.0\% \\
        7 & BANK\_B & \$136.25 & 12.0\% \\
        8 & BANK\_A & \$143.29 & 13.0\% \\
        8 & BANK\_B & \$136.25 & 12.0\% \\
        9 & BANK\_A & \$134.78 & 12.0\% \\
        9 & BANK\_B & \$136.25 & 12.0\% \\
        10 & BANK\_A & \$131.78 & 11.0\% \\
        10 & BANK\_B & \$136.25 & 12.0\% \\
        11 & BANK\_A & \$129.64 & 10.0\% \\
        11 & BANK\_B & \$136.25 & 12.0\% \\
        12 & BANK\_A & \$163.10 & 9.0\% \\
        12 & BANK\_B & \$136.25 & 12.0\% \\
        13 & BANK\_A & \$237.53 & 8.0\% \\
        13 & BANK\_B & \$136.25 & 12.0\% \\
        14 & BANK\_A & \$317.48 & 7.0\% \\
        14 & BANK\_B & \$136.25 & 12.0\% \\
        15 & BANK\_A & \$298.68 & 6.5\% \\
        15 & BANK\_B & \$136.25 & 12.0\% \\
        16 & BANK\_A & \$326.00 & 6.0\% \\
        16 & BANK\_B & \$136.25 & 12.0\% \\
        17 & BANK\_A & \$516.04 & 5.5\% \\
        17 & BANK\_B & \$136.25 & 12.0\% \\
        18 & BANK\_A & \$516.04 & 5.5\% \\
        18 & BANK\_B & \$136.25 & 12.0\% \\
        19 & BANK\_A & \$516.04 & 5.5\% \\
        19 & BANK\_B & \$136.25 & 12.0\% \\
        20 & BANK\_A & \$516.04 & 5.5\% \\
        20 & BANK\_B & \$136.25 & 12.0\% \\
        21 & BANK\_A & \$490.81 & 5.6\% \\
        21 & BANK\_B & \$136.25 & 12.0\% \\
        22 & BANK\_A & \$515.29 & 5.6\% \\
        22 & BANK\_B & \$136.25 & 12.0\% \\
        23 & BANK\_A & \$515.15 & 5.6\% \\
        23 & BANK\_B & \$136.25 & 12.0\% \\
        24 & BANK\_A & \$515.15 & 5.6\% \\
        24 & BANK\_B & \$136.25 & 12.0\% \\
\end{longtable}




\section{Experiment 3: Symmetric Equilibrium - Detailed Results}
\label{app:exp3}

This appendix provides iteration-by-iteration results and convergence charts for
all three passes of experiment 3: symmetric equilibrium.

\subsection{Pass 1}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp3_pass1_combined.png}
    \caption{Experiment 3: Symmetric Equilibrium - Pass 1 convergence}
    \label{fig:exp3_pass1_convergence}
\end{figure}



\begin{table}[H]
    \centering
    \caption{Experiment 3: Symmetric Equilibrium - Pass 1}
    \label{tab:exp3_pass1}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$49.95 & 50.0\% \\
        Baseline & BANK\_B & \$49.95 & 50.0\% \\
        0 & BANK\_A & \$49.95 & 50.0\% \\
        0 & BANK\_B & \$49.95 & 50.0\% \\
        1 & BANK\_A & \$29.97 & 30.0\% \\
        1 & BANK\_B & \$39.96 & 40.0\% \\
        2 & BANK\_A & \$120.99 & 1.0\% \\
        2 & BANK\_B & \$69.97 & 30.0\% \\
        3 & BANK\_A & \$120.90 & 0.9\% \\
        3 & BANK\_B & \$68.98 & 29.0\% \\
        4 & BANK\_A & \$120.96 & 1.0\% \\
        4 & BANK\_B & \$69.97 & 30.0\% \\
        5 & BANK\_A & \$120.99 & 1.0\% \\
        5 & BANK\_B & \$71.98 & 32.0\% \\
        6 & BANK\_A & \$120.96 & 1.0\% \\
        6 & BANK\_B & \$69.97 & 30.0\% \\
        7 & BANK\_A & \$120.99 & 1.0\% \\
        7 & BANK\_B & \$69.97 & 30.0\% \\
        \hline
    \end{tabular}
\end{table}


\subsection{Pass 2}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp3_pass2_combined.png}
    \caption{Experiment 3: Symmetric Equilibrium - Pass 2 convergence}
    \label{fig:exp3_pass2_convergence}
\end{figure}



\begin{table}[H]
    \centering
    \caption{Experiment 3: Symmetric Equilibrium - Pass 2}
    \label{tab:exp3_pass2}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$49.95 & 50.0\% \\
        Baseline & BANK\_B & \$49.95 & 50.0\% \\
        0 & BANK\_A & \$49.95 & 50.0\% \\
        0 & BANK\_B & \$49.95 & 50.0\% \\
        1 & BANK\_A & \$19.98 & 20.0\% \\
        1 & BANK\_B & \$39.96 & 40.0\% \\
        2 & BANK\_A & \$125.01 & 5.0\% \\
        2 & BANK\_B & \$69.97 & 30.0\% \\
        3 & BANK\_A & \$123.99 & 4.0\% \\
        3 & BANK\_B & \$67.96 & 28.0\% \\
        4 & BANK\_A & \$124.50 & 4.5\% \\
        4 & BANK\_B & \$69.46 & 29.5\% \\
        5 & BANK\_A & \$124.80 & 4.8\% \\
        5 & BANK\_B & \$69.88 & 29.9\% \\
        6 & BANK\_A & \$124.89 & 4.9\% \\
        6 & BANK\_B & \$68.98 & 29.0\% \\
        7 & BANK\_A & \$124.89 & 4.9\% \\
        7 & BANK\_B & \$68.98 & 29.0\% \\
        \hline
    \end{tabular}
\end{table}


\subsection{Pass 3}


\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{charts/exp3_pass3_combined.png}
    \caption{Experiment 3: Symmetric Equilibrium - Pass 3 convergence}
    \label{fig:exp3_pass3_convergence}
\end{figure}



\begin{table}[H]
    \centering
    \caption{Experiment 3: Symmetric Equilibrium - Pass 3}
    \label{tab:exp3_pass3}
    \begin{tabular}{llrr}
        \hline
        Iteration & Agent & Cost & Liquidity \\
        \hline
        Baseline & BANK\_A & \$49.95 & 50.0\% \\
        Baseline & BANK\_B & \$49.95 & 50.0\% \\
        0 & BANK\_A & \$49.95 & 50.0\% \\
        0 & BANK\_B & \$49.95 & 50.0\% \\
        1 & BANK\_A & \$19.98 & 20.0\% \\
        1 & BANK\_B & \$19.98 & 20.0\% \\
        2 & BANK\_A & \$209.99 & 10.0\% \\
        2 & BANK\_B & \$200.99 & 1.0\% \\
        3 & BANK\_A & \$209.00 & 9.0\% \\
        3 & BANK\_B & \$200.51 & 0.5\% \\
        4 & BANK\_A & \$209.99 & 10.0\% \\
        4 & BANK\_B & \$200.90 & 0.9\% \\
        5 & BANK\_A & \$207.98 & 8.0\% \\
        5 & BANK\_B & \$200.99 & 1.0\% \\
        6 & BANK\_A & \$209.90 & 9.9\% \\
        6 & BANK\_B & \$200.96 & 0.9\% \\
        7 & BANK\_A & \$209.96 & 10.0\% \\
        7 & BANK\_B & \$200.96 & 0.9\% \\
        \hline
    \end{tabular}
\end{table}




\section{LLM Prompt Audit}
\label{app:prompt_audit}

This appendix documents the LLM prompts used for policy learning and provides
an audit of potential information leakage or bias.

\subsection{Prompt Structure}

Each agent receives a \textbf{system prompt} (identical for all agents) and a
\textbf{user prompt} (agent-specific, filtered).

\subsubsection{System Prompt (Shared)}

The system prompt provides domain context without agent-specific information:

\begin{enumerate}
    \item \textbf{Domain explanation}: RTGS mechanics, queuing, LSM netting
    \item \textbf{Cost structure}: Overdraft, delay, deadline, and EOD penalties
    \item \textbf{Policy tree architecture}: JSON schema for valid policies
    \item \textbf{Optimization guidance}: General strategy for cost minimization
    \item \textbf{Validation checklist}: Common errors to avoid
\end{enumerate}

\subsubsection{User Prompt (Agent-Specific)}

The user prompt provides filtered information for the optimizing agent only:

\begin{enumerate}
    \item \textbf{Performance metrics}: Agent's own mean cost, standard deviation, settlement rate
    \item \textbf{Current policy}: Agent's own policy parameters (e.g., \texttt{initial\_liquidity\_fraction})
    \item \textbf{Cost breakdown}: Agent's own costs by type (delay, overdraft, penalties)
    \item \textbf{Simulation trace}: Filtered event log showing ONLY:
    \begin{itemize}
        \item Outgoing transactions FROM this agent
        \item Incoming payments TO this agent
        \item Agent's own policy decisions (Submit, Hold, etc.)
        \item Agent's own balance changes (for outgoing settlements only)
    \end{itemize}
    \item \textbf{Iteration history}: Agent's own cost trajectory across iterations
    \item \textbf{Parameter trajectories}: How agent's parameters evolved
\end{enumerate}

\subsection{Information Boundaries}

\textbf{Critical invariant}: An agent optimizing policy may ONLY observe:
\begin{itemize}
    \item Events where they are the sender (outgoing transactions)
    \item Events where they are the receiver (incoming liquidity)
    \item Their own state changes (balance, collateral, costs)
\end{itemize}

\subsubsection{What Agents CANNOT See}

\begin{itemize}
    \item \textbf{Counterparty balances}: No visibility into opponent's reserves
    \item \textbf{Counterparty policies}: No access to opponent's decision trees
    \item \textbf{Counterparty costs}: No visibility into opponent's cost breakdown
    \item \textbf{Counterparty reasoning}: No access to opponent's LLM responses
    \item \textbf{Third-party transactions}: Events not involving this agent are filtered
\end{itemize}

This strict isolation is enforced by the \texttt{filter\_events\_for\_agent()} function
which processes the raw simulation event stream before prompt construction.

\subsection{Prompt Sanitization}

All prompts are sanitized to remove:

\begin{itemize}
    \item References to ``optimal'' or ``theoretical'' equilibria
    \item Hints about expected asymmetric vs symmetric outcomes
    \item Explicit game-theoretic terminology (Nash, Pareto, etc.)
    \item Training data leakage from prior experiments
\end{itemize}

\subsection{Audit Conclusions}

Based on our review:

\begin{enumerate}
    \item \textbf{No information leakage}: Agents discover equilibria through
    observed costs, not prompt hints. Counterparty information is strictly filtered.

    \item \textbf{Fair competition}: Both agents receive identically structured
    prompts with symmetric information access. Neither agent has visibility into
    the other's balance, policy, or reasoning.

    \item \textbf{Reproducibility}: The same prompts with identical seeds produce
    identical learning trajectories.

    \item \textbf{Strategic opacity}: Agents cannot observe counterparty reserves
    or pending decisions. The only ``signal'' about counterparty behavior comes
    from incoming payments, which is realistic RTGS transparency.
\end{enumerate}

The experiment results demonstrate genuine strategic learning rather than
prompt-induced behavior, as evidenced by:

\begin{itemize}
    \item Gradual convergence over multiple iterations
    \item Different equilibria across different cost structures
    \item Consistent results across independent passes
\end{itemize}



\end{document}
