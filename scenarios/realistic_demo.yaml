# Realistic RTGS Simulation Scenario
#
# This scenario simulates a small real-time gross settlement system with 4 banks.
# Banks have different liquidity levels and payment patterns, demonstrating:
# - RTGS immediate settlement when liquidity is available
# - Payment queueing during liquidity shortages
# - LSM bilateral offsetting and cycle detection
# - Cost accumulation (overdraft, delay penalties)

simulation:
  ticks_per_day: 100
  num_days: 1
  rng_seed: 42

agents:
  # BANK_A: Large commercial bank with high liquidity
  - id: "BANK_A"
    opening_balance: 5000000  # $50,000 in cents
    credit_limit: 2000000     # $20,000 overdraft facility
    policy:
      type: "Fifo"

    arrival_config:
      rate_per_tick: 0.5  # ~50 transactions per day
      amount_distribution:
        type: "Uniform"
        min: 10000   # $100 minimum
        max: 500000  # $5,000 maximum
      counterparty_weights:
        BANK_B: 0.4  # Prefers to pay BANK_B (correspondent banking)
        BANK_C: 0.3
        BANK_D: 0.3
      deadline_range: [10, 30]  # 10-30 ticks deadline
      priority: 5
      divisible: false

  # BANK_B: Mid-sized bank with moderate liquidity
  - id: "BANK_B"
    opening_balance: 3000000  # $30,000
    credit_limit: 1000000     # $10,000 overdraft
    policy:
      type: "Fifo"

    arrival_config:
      rate_per_tick: 0.4  # ~40 transactions per day
      amount_distribution:
        type: "Uniform"
        min: 5000    # $50 minimum
        max: 300000  # $3,000 maximum
      counterparty_weights:
        BANK_A: 0.5  # Pays back to BANK_A often
        BANK_C: 0.3
        BANK_D: 0.2
      deadline_range: [15, 40]
      priority: 5
      divisible: false

  # BANK_C: Smaller bank with low liquidity (prone to gridlock)
  - id: "BANK_C"
    opening_balance: 1500000  # $15,000
    credit_limit: 500000      # $5,000 overdraft
    policy:
      type: "Fifo"

    arrival_config:
      rate_per_tick: 0.3  # ~30 transactions per day
      amount_distribution:
        type: "Uniform"
        min: 5000    # $50 minimum
        max: 200000  # $2,000 maximum
      counterparty_weights:
        BANK_A: 0.3
        BANK_B: 0.3
        BANK_D: 0.4
      deadline_range: [10, 35]
      priority: 5
      divisible: false

  # BANK_D: Regional bank with moderate liquidity
  - id: "BANK_D"
    opening_balance: 2500000  # $25,000
    credit_limit: 750000      # $7,500 overdraft
    policy:
      type: "Fifo"

    arrival_config:
      rate_per_tick: 0.35  # ~35 transactions per day
      amount_distribution:
        type: "Uniform"
        min: 8000    # $80 minimum
        max: 400000  # $4,000 maximum
      counterparty_weights:
        BANK_A: 0.3
        BANK_B: 0.2
        BANK_C: 0.5  # Often pays BANK_C (creates cycles)
      deadline_range: [12, 35]
      priority: 5
      divisible: false

# LSM Configuration: Enable bilateral offsetting and cycle detection
lsm_config:
  bilateral_offsetting: true
  cycle_detection: true
  max_iterations: 5

# Cost Configuration: Default rates
cost_rates:
  overdraft_bps_per_tick: 10        # 10 basis points per tick for negative balance
  delay_cost_per_tick_per_cent: 1   # $0.01 per cent per tick in queue
  eod_penalty_per_transaction: 1000000  # $10,000 penalty for unsettled at EOD
  deadline_penalty: 500000          # $5,000 penalty for missing deadline
  split_friction_cost: 10000        # $100 cost to split a transaction
